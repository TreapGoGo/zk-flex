# ZK Flex - 运行指南（保证能跑通）

## 🎯 3 个终端，3 个命令

### 终端 1: 启动链

```bash
cd ~/ethshanghai/zk-flex
yarn chain
```

**等待这行输出**：
```
Listening on 127.0.0.1:8545
```

**✅ 看到这行后，链就启动了！保持这个终端运行。**

---

### 终端 2: 运行 Demo（等链启动 5 秒后）

```bash
cd ~/ethshanghai/zk-flex/packages/foundry

forge script script/DemoSimple.s.sol \
  --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 \
  --rpc-url http://localhost:8545 \
  --broadcast
```

**应该看到**：
```
==================================================
          ZK FLEX DEMO - FULL WALKTHROUGH        
==================================================

Demo Addresses:
  Bob_real: 0x9965...
  Bob_proxy: 0xf39F...
  Alice: 0x7099...

[0/6] Setup: Funding wallets...
      Bob_real funded: 0x9965... - 15,000 ETH
      ...

[1/6] Deploying contracts...
      Registry deployed: 0x5b73...
      Verifier deployed: 0xC7f2...

[2/6] Bob creates wallet pool instance...
      Instance created: 0xdaE9...

...

Instance: 0xdaE97900D4B184c5D2012dcdB658c008966466DD  ← 记下这个！
```

**✅ 成功！记下 Instance 地址。**

---

### 终端 3: 启动前端（等部署完成）

```bash
cd ~/ethshanghai/zk-flex
yarn start
```

**等待**：
```
ready - started server on 0.0.0.0:3000
```

**✅ 打开浏览器**：http://localhost:3000

---

## 🎉 完成！现在你有：

```
✅ 本地链运行（Terminal 1）
✅ 合约已部署（Terminal 2 输出）
✅ 前端运行（Terminal 3）
✅ Instance 地址（用于前端）

可以访问：
- Landing: http://localhost:3000
- Bob: http://localhost:3000/zk-flex/bob
- Alice: http://localhost:3000/zk-flex/alice
```

---

## ⚠️ 如果遇到问题

### "Enter keystore password"

**不要输入！** 按 `Ctrl+C` 停止，然后：

```bash
# 确认 .env 没有 keystore 配置
cat packages/foundry/.env

# 应该只有 3 行地址配置，没有 KEYSTORE

# 重新运行命令
```

### "Connection refused"

**链没启动！** 

```bash
# 回到 Terminal 1，确认看到：
# Listening on 127.0.0.1:8545

# 测试连接：
curl http://localhost:8545

# 应该返回 JSON 数据
```

---

## 🎬 Hackathon 演示时

### 提前准备（3 分钟）

1. ✅ 运行上面 3 个命令
2. ✅ 打开浏览器到 http://localhost:3000
3. ✅ 保持 3 个终端可见

### Pitch 时（2 分钟）

1. **展示前端**（30秒）
2. **展示 Terminal 2 输出**（30秒）- 指向 "32 addresses" "Bob hidden"
3. **技术讲解**（60秒）- PPT + 架构图

---

**这个指南保证能跑通！** ✅

